<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEO BST Visualizer | Advanced Binary Search Tree Explorer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./BST.css">
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcome-page">
        <h1 style="color: white;">NEO BST VISUALIZER</h1>
        <img id="namaste-image" src="https://cdn.pixabay.com/photo/2016/11/29/08/41/apple-1868496_1280.jpg" alt="Binary Tree">
        <p>Experience binary search trees like never before with our advanced visualization tool. Explore, interact, and master BST operations with stunning visuals.</p>
        <button class="start-btn" onclick="startVisualizer()">
            <i class="fas fa-play"></i> Begin Exploration
        </button>
    </div>

    <!-- Main Visualizer Content -->
    <div id="visualizer-content" class="hidden">
        <div class="visualizer-header">
            <h2 style="color: white;">NEO BST VISUALIZER</h2>
            <p>Interactive visualization of Binary Search Tree operations with real-time animations and advanced features</p>
        </div>

        <!-- Control Panel -->
        <div class="control-panel">
            <div class="input-group">
                <div class="input-field">
                    <label for="nodeValue">Node Value</label>
                    <input type="number" id="nodeValue" placeholder="Enter node value">
                </div>
            </div>

            <div class="button-grid">
                <button class="action-btn btn-insert" onclick="insertNode()" data-tooltip="Insert a node">
                    <i class="fas fa-plus"></i> Insert
                </button>
                <button class="action-btn btn-delete" onclick="deleteNode()" data-tooltip="Delete a node">
                    <i class="fas fa-trash"></i> Delete
                </button>
                <button class="action-btn btn-search" onclick="searchNode()" data-tooltip="Search for a node">
                    <i class="fas fa-search"></i> Search
                </button>
                <button class="action-btn btn-min" onclick="findMinNode()" data-tooltip="Find minimum value">
                    <i class="fas fa-arrow-down"></i> Min
                </button>
                <button class="action-btn btn-max" onclick="findMaxNode()" data-tooltip="Find maximum value">
                    <i class="fas fa-arrow-up"></i> Max
                </button>
                <button class="action-btn btn-sibling" onclick="findSibling()" data-tooltip="Find sibling">
                    <i class="fas fa-code-branch"></i> Sibling
                </button>
                <button class="action-btn btn-traversal" onclick="preorderTraversal()" data-tooltip="Preorder traversal">
                    <i class="fas fa-project-diagram"></i> Preorder
                </button>
                <button class="action-btn btn-traversal" onclick="inorderTraversal()" data-tooltip="Inorder traversal">
                    <i class="fas fa-project-diagram"></i> Inorder
                </button>
                <button class="action-btn btn-traversal" onclick="postorderTraversal()" data-tooltip="Postorder traversal">
                    <i class="fas fa-project-diagram"></i> Postorder
                </button>
                <button class="action-btn btn-traversal" onclick="levelOrderTraversal()" data-tooltip="Level order traversal">
                    <i class="fas fa-layer-group"></i> Level Order
                </button>
                <button class="action-btn btn-height" onclick="findHeight()" data-tooltip="Find tree height">
                    <i class="fas fa-ruler-vertical"></i> Height
                </button>
                <button class="action-btn btn-balance" onclick="convertToBalancedBST()" data-tooltip="Balance the BST">
                    <i class="fas fa-balance-scale"></i> Balance
                </button>
                <button class="action-btn btn-depth" onclick="findDepth()" data-tooltip="Find node depth">
                    <i class="fas fa-ruler"></i> Depth
                </button>
                <button class="action-btn btn-successor" onclick="findSuccessor()" data-tooltip="Find successor">
                    <i class="fas fa-step-forward"></i> Successor
                </button>
                <button class="action-btn btn-predecessor" onclick="findPredecessor()" data-tooltip="Find predecessor">
                    <i class="fas fa-step-backward"></i> Predecessor
                </button>
                <button class="action-btn btn-ancestors" onclick="findAncestors()" data-tooltip="Find ancestors">
                    <i class="fas fa-sitemap"></i> Ancestors
                </button>
                <button class="action-btn btn-check" onclick="checkIfBST()" data-tooltip="Check BST property">
                    <i class="fas fa-check"></i> Check BST
                </button>
                <button class="action-btn btn-subtree" onclick="findMinLeftSubtree()" data-tooltip="Min in left subtree">
                    <i class="fas fa-arrow-circle-left"></i> Min Left
                </button>
                <button class="action-btn btn-subtree" onclick="findMaxLeftSubtree()" data-tooltip="Max in left subtree">
                    <i class="fas fa-arrow-circle-left"></i> Max Left
                </button>
                <button class="action-btn btn-subtree" onclick="findMinRightSubtree()" data-tooltip="Min in right subtree">
                    <i class="fas fa-arrow-circle-right"></i> Min Right
                </button>
                <button class="action-btn btn-subtree" onclick="findMaxRightSubtree()" data-tooltip="Max in right subtree">
                    <i class="fas fa-arrow-circle-right"></i> Max Right
                </button>
                <button class="action-btn btn-sum" onclick="calculateSum()" data-tooltip="Sum of all nodes">
                    <i class="fas fa-calculator"></i> Sum Nodes
                </button>
                <button class="action-btn btn-diameter" onclick="findDiameter()" data-tooltip="Find distance between two nodes">
                    <i class="fas fa-expand"></i> Diameter
                </button>
            </div>

            <div class="input-group" style="margin-top: 1.5rem;">
                <div class="input-field">
                    <label for="nodeValue1">First Node</label>
                    <input type="number" id="nodeValue1" placeholder="Enter first node for LCA or Diameter">
                </div>
                <div class="input-field">
                    <label for="nodeValue2">Second Node</label>
                    <input type="number" id="nodeValue2" placeholder="Enter second node for LCA or Diameter">
                </div>
                <button class="action-btn btn-lca" onclick="findLCA()" data-tooltip="Find lowest common ancestor">
                    <i class="fas fa-handshake"></i> Find LCA
                </button>
            </div>
        </div>

        <!-- Tree Visualization -->
        <div class="tree-container">
            <svg id="bstTree">
                <text id="output-text" x="50%" y="95%" text-anchor="middle"></text>
            </svg>
        </div>
    </div>

    <!-- Floating Controls -->
    <div class="floating-controls">
        <div class="floating-btn" id="settings-toggle" onclick="toggleSettings()">
            <i class="fas fa-cog"></i>
        </div>
        <div class="floating-btn" id="help-toggle" onclick="toggleHelp()">
            <i class="fas fa-question"></i>
        </div>
        <div class="floating-btn" id="home-toggle" onclick="goHome()">
            <i class="fas fa-home"></i>
        </div>
    </div>

    <!-- Settings Panel -->
    <div class="panel" id="settings-panel">
        <div class="panel-header">
            <h3>Visual Settings</h3>
            <button class="panel-close" onclick="toggleSettings()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="panel-section">
            <h4>Tree Layout</h4>
            <div class="landscape-options">
            <div class="landscape-option" onclick="changeLandscape('standard')">Standard</div>
        <div class="landscape-option" onclick="changeLandscape('vertical')">Vertical</div>
        <div class="landscape-option" onclick="changeLandscape('horizontal')">Horizontal</div>
        <div class="landscape-option" onclick="changeLandscape('radial')">Radial</div>
            </div>
        </div>

        <div class="panel-section">
            <h4>Zoom Level</h4>
            <div class="zoom-controls">
                <button class="zoom-btn" onclick="zoomOut()">
                    <i class="fas fa-search-minus"></i>
                </button>
                <span class="zoom-value" id="zoom-value">100%</span>
                <button class="zoom-btn" onclick="zoomIn()">
                    <i class="fas fa-search-plus"></i>
                </button>
            </div>
        </div>
    <!-- Help Panel -->
    <div class="panel" id="help-panel">
        <div class="panel-header">
            <h3>BST Visualizer Guide</h3>
            <button class="panel-close" onclick="toggleHelp()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="panel-section">
            <h4>Basic Operations</h4>
            <ul>
                <li style="color: #2D3436;"><strong>Insert:</strong> Add a node to the BST</li>
                <li style="color: #2D3436;"><strong>Delete:</strong> Remove a node from the BST</li>
                <li style="color: #2D3436;"><strong>Search:</strong> Find a node in the BST</li>
                <li style="color: #2D3436;"><strong>Find Min/Max:</strong> Find minimum or maximum value</li>
            </ul>
        </div>

        <div class="panel-section">
            <h4>Traversals</h4>
            <ul>
                <li style="color: #2D3436;"><strong>Preorder:</strong> Root → Left → Right</li>
                <li style="color: #2D3436;"><strong>Inorder:</strong> Left → Root → Right (sorted order)</li>
                <li style="color: #2D3436;"><strong>Postorder:</strong> Left → Right → Root</li>
                <li style="color: #2D3436;"><strong>Level Order:</strong> Breadth-first traversal</li>
            </ul>
        </div>

        <div class="panel-section">
            <h4>Advanced Features</h4>
            <ul>
                <li style="color: #2D3436;"><strong>Balance BST:</strong> Convert to a balanced BST</li>
                <li style="color: #2D3436;"><strong>Find Sibling:</strong> Find node's sibling</li>
                <li style="color: #2D3436;"><strong>Find Ancestors:</strong> Show all ancestors of a node</li>
                <li style="color: #2D3436;"><strong>Find LCA:</strong> Find lowest common ancestor of two nodes</li>
                <p style="color: #2D3436;">Note:</p>
                <p style="color: #2D3436;"><strong>Two input boxes to the left of the Find LCA button are applicable for both LCA (Lowest Common Ancestor) and Find Diameter</strong></p>
                <li style="color: #2D3436;"><strong>Diameter:</strong> Find distance between two nodes</li>
            </ul>
        </div>

        <div class="panel-section">
            <h4>Tips</h4>
            <ul>
                <li style="color: #2D3436;">Use the settings panel to customize your experience</li>
                <li style="color: #2D3436;">Hover over buttons to see tooltips</li>
                <li style="color: #2D3436;">Watch animations to understand operations</li>
                <li style="color: #2D3436;">Try different themes and backgrounds</li>
            </ul>
        </div>
    </div>

    <!-- Message Box -->
    <div id="message-box">
        <div id="message-content"></div>
        <button id="message-close">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="BST.js"></script>
    
    <script>
        // UI Control Functions
        function startVisualizer() {
            document.getElementById('welcome-page').style.display = 'none';
            document.getElementById('visualizer-content').style.display = 'block';
            bst.render(); // Render the initial tree layout
        }

        function goHome() {
            window.location.href = 'Visulization.html';
            closeAllPanels();
        }

        function toggleSettings() {
            document.getElementById('settings-panel').classList.toggle('open');
            document.getElementById('help-panel').classList.remove('open');
        }

        function toggleHelp() {
            document.getElementById('help-panel').classList.toggle('open');
            document.getElementById('settings-panel').classList.remove('open');
        }

        function closeAllPanels() {
            document.getElementById('settings-panel').classList.remove('open');
            document.getElementById('help-panel').classList.remove('open');
        }

        // Landscape-specific initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial layout as 'vertical' and mark it as selected
            const initialLayout = 'vertical';
            changeLandscape(initialLayout); // Trigger initial layout
            document.querySelector(`.landscape-option[data-layout="${initialLayout}"]`).classList.add('selected');
        });

        function changeTheme(theme) {
            document.body.classList.remove('theme-default', 'theme-dark', 'theme-red', 'theme-green', 'theme-blue');
            document.body.classList.add('theme-' + theme);
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        function changeBackground(bg) {
            document.querySelectorAll('.bg-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.classList.add('selected');
        }

        function zoomIn() {
            const treeContainer = document.querySelector('.tree-container');
            let currentZoom = parseFloat(treeContainer.style.transform?.replace('scale(', '')?.replace(')', '')) || 1;
            currentZoom += 0.1;
            treeContainer.style.transform = `scale(${currentZoom})`;
            document.getElementById('zoom-value').textContent = `${Math.round(currentZoom * 100)}%`;
        }

        function zoomOut() {
            const treeContainer = document.querySelector('.tree-container');
            let currentZoom = parseFloat(treeContainer.style.transform?.replace('scale(', '')?.replace(')', '')) || 1;
            currentZoom = Math.max(0.5, currentZoom - 0.1);
            treeContainer.style.transform = `scale(${currentZoom})`;
            document.getElementById('zoom-value').textContent = `${Math.round(currentZoom * 100)}%`;
        }

        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    showMessage('Error attempting to enable fullscreen: ' + err.message, 'error');
                });
            } else {
                if (document.exitFullscreen) document.exitFullscreen();
            }
        }

        function showMessage(message, type = 'info') {
            const messageBox = document.getElementById('message-box');
            messageBox.className = '';
            messageBox.classList.add(type);
            document.getElementById('message-content').textContent = message;
            messageBox.classList.add('show');
            setTimeout(() => messageBox.classList.remove('show'), 3000);
        }

        function hideMessageBox() {
            document.getElementById('message-box').classList.remove('show');
        }

        document.getElementById('message-close').addEventListener('click', hideMessageBox);

        document.addEventListener('click', function(event) {
            if (!event.target.closest('.panel') && !event.target.closest('.floating-btn')) {
                closeAllPanels();
            }
        });

        document.querySelectorAll('.panel').forEach(panel => {
            panel.addEventListener('click', function(event) {
                event.stopPropagation();
            });
        });
    </script>
</body>
</html>